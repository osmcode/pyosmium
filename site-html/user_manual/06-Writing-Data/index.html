
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://osmcode.org/pyosmium/user_manual/06-Writing-Data/">
      
      
        <link rel="prev" href="../05-Working-with-Handlers/">
      
      
        <link rel="next" href="../07-Input-Formats-And-Other-Sources/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Writing Data - Pyosmium 4.3.0</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#writing-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pyosmium 4.3.0" class="md-header__button md-logo" aria-label="Pyosmium 4.3.0" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pyosmium 4.3.0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Writing Data
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/osmcode/pyosmium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  User Manual

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cookbooks/" class="md-tabs__link">
          
  
  
  Cookbooks

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pyosmium 4.3.0" class="md-nav__button md-logo" aria-label="Pyosmium 4.3.0" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Pyosmium 4.3.0
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/osmcode/pyosmium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    User Manual
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Manual
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-First-Steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    First Steps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-Extracting-Object-Data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OSM Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-Working-with-Geometries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with Geometries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-Working-with-Filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pre-Filtering Input Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-Working-with-Handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Handler-based Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Writing Data
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Writing Data
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-writer-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic writer usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic writer usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writing-modified-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing modified objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-custom-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing custom objects
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer types
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writer types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writing-specific-objects-only" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing specific objects only
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-reference-complete-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing reference-complete files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-files-with-forward-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing files with forward references
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-Input-Formats-And-Other-Sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Input Formats and Other Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-Working-With-Change-Files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working With Change Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-Working-With-History-Files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working With History Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-Replication-Tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Replication Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cookbooks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cookbooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Enhance-Tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Enhancing Tags in an OSM File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Filtering-Data-By-Tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filtering an OSM File By Tags
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Filter-Data-By-Geometry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filtering by Geometry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Adding-Node-Infos-To-Boundaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding Place Node Information to Boundary Relations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Adding-Route-Info-To-Ways/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding Relation Information to Member Ways
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Visualizing-Data-With-Geopandas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visualising Data With GeoPandas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Dataclasses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OSM Data Containers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/File-Processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Iterative Data Reading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Handler-Processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Handlers and Handler Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Data-Writers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Writers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/IO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IO Classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Geometry-Functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Geometry Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Area/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Area Building
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Indexes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Replication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Thread-Safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thread Safety
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="writing-data">Writing Data<a class="headerlink" href="#writing-data" title="Permanent link">ðŸ”—</a></h1>
<p>pyosmium can also be used to write OSM files. It offers different writer
classes which support creating referentially correct files.</p>
<h2 id="basic-writer-usage">Basic writer usage<a class="headerlink" href="#basic-writer-usage" title="Permanent link">ðŸ”—</a></h2>
<p>All writers are created by instantiating them with the name of the file to
write to.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">writer</span> <span class="o">=</span> <span class="n">osmium</span><span class="o">.</span><span class="n">SimpleWriter</span><span class="p">(</span><span class="s1">&#39;my_extra_data.osm.pbf&#39;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>The format of the output file is usually determined through the file prefix.
pyosmium will refuse to overwrite any existing files. Either make sure to
delete the files before instantiating a writer or use the parameter
<code>overwrite=true</code>.</p>
<p>All writers are <a href="https://docs.python.org/3/reference/datamodel.html#context-managers">context managers</a> and to ensure that the file is properly closed in the
end, the recommended  way to use them is in a with statement:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="k">with</span> <span class="n">osmium</span><span class="o">.</span><span class="n">SimpleWriter</span><span class="p">(</span><span class="s1">&#39;my_extra_data.osm.pbf&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
</span><span id="__span-1-2">    <span class="c1"># do stuff here</span>
</span></code></pre></div>
</div>
<p>When not used inside a with block, then don't forget to call the <code>close()</code>
function explicitly to close the writer.</p>
<p>Once a writer is instantiated, one of the <code>add*</code> functions can be used to
add an OSM object to the file. You can either use one of the
<code>add_node/way/relation</code> functions to force writing a specific type of
object or use the generic <code>add</code> function, which will try to determine the
object type. The OSM objects are directly written out in the order in which
they are given to the writer object. It is your responsibility as a user to
make sure that the order is correct with respect to the
<a class="autorefs autorefs-internal" title="Order in OSM files" href="../01-First-Steps/#order-in-osm-files">conventions for object order</a>.</p>
<p>Here is a complete example for a script that converts a file from OPL format
to PBF format:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="k">with</span> <span class="n">osmium</span><span class="o">.</span><span class="n">SimpleWriter</span><span class="p">(</span><span class="s1">&#39;buildings.osm.pbf&#39;</span><span class="p">)</span> <span class="k">as</span>  <span class="n">writer</span><span class="p">:</span>
</span><span id="__span-2-2">    <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;buildings.opl&#39;</span><span class="p">):</span>
</span><span id="__span-2-3">        <span class="n">writer</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="writing-modified-objects">Writing modified objects<a class="headerlink" href="#writing-modified-objects" title="Permanent link">ðŸ”—</a></h3>
<p>In the example above an OSM object from an input file was written out directly
without modifications. Writers can accept OSM nodes, ways and relations
that way. However, usually you want to modify some of the data in the object
before writing it out again. Use the <code>replace()</code> function to create a
<em>mutable version</em> of the object with the given parameters replaced.</p>
<p>Say you want to create a copy of a OSM file with all <code>source</code> tags removed:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="k">with</span> <span class="n">osmium</span><span class="o">.</span><span class="n">SimpleWriter</span><span class="p">(</span><span class="s1">&#39;buildings.osm.pbf&#39;</span><span class="p">)</span> <span class="k">as</span>  <span class="n">writer</span><span class="p">:</span>
</span><span id="__span-3-2">    <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;buildings.opl&#39;</span><span class="p">):</span>
</span><span id="__span-3-3">        <span class="k">if</span> <span class="s1">&#39;source&#39;</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
</span><span id="__span-3-4">            <span class="n">new_tags</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">tags</span><span class="p">)</span> <span class="c1"># make a copy of the tags</span>
</span><span id="__span-3-5">            <span class="k">del</span> <span class="n">new_tags</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span>
</span><span id="__span-3-6">            <span class="n">writer</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tags</span><span class="o">=</span><span class="n">new_tags</span><span class="p">))</span>
</span><span id="__span-3-7">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-8">            <span class="c1"># No source tag. Write object out as-is.</span>
</span><span id="__span-3-9">            <span class="n">writer</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
</span></code></pre></div>
</div>
<h3 id="writing-custom-objects">Writing custom objects<a class="headerlink" href="#writing-custom-objects" title="Permanent link">ðŸ”—</a></h3>
<p>You can also write data that is not based on OSM input data at all. The write
functions will accept any Python object that mimics the attributes of a
node, way or relation.</p>
<p>Here is a simple example that writes out four random points:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">uniform</span>
</span><span id="__span-4-2">
</span><span id="__span-4-3"><span class="k">class</span><span class="w"> </span><span class="nc">RandomNode</span><span class="p">:</span>
</span><span id="__span-4-4">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
</span><span id="__span-4-5">        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
</span><span id="__span-4-6">        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
</span><span id="__span-4-7">        <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
</span><span id="__span-4-8">
</span><span id="__span-4-9"><span class="k">with</span> <span class="n">osmium</span><span class="o">.</span><span class="n">SimpleWriter</span><span class="p">(</span><span class="s1">&#39;points.opl&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
</span><span id="__span-4-10">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span id="__span-4-11">        <span class="n">writer</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">RandomNode</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Random </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
</span></code></pre></div>
</div>
<p>The following table gives an overview over the recognised attributes and
acceptable types. If an attribute is missing, then pyosmium will choose a
suitable default or leave the attribute out completely from the output if
that is possible.</p>
<table>
<thead>
<tr>
<th>attribute</th>
<th>types</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><code>int</code></td>
</tr>
<tr>
<td>version</td>
<td><code>int</code> (positive non-zero value)</td>
</tr>
<tr>
<td>visible</td>
<td><code>bool</code></td>
</tr>
<tr>
<td>changeset</td>
<td><code>int</code> (positive non-zero value)</td>
</tr>
<tr>
<td>timestamp</td>
<td><code>str</code> or <code>datetime</code> (will be translated to UTC first)</td>
</tr>
<tr>
<td>uid</td>
<td><code>int</code></td>
</tr>
<tr>
<td>tags</td>
<td><a class="autorefs autorefs-internal" title="            osmium.osm.TagList" href="../../reference/Dataclasses/#osmium.osm.TagList">osmium.osm.TagList</a>, a dict-like object or a list of tuples, where each tuple contains a (key, value) string pair</td>
</tr>
<tr>
<td>user</td>
<td><code>str</code></td>
</tr>
<tr>
<td>location</td>
<td><em>(node only)</em> <a class="autorefs autorefs-internal" title="            osmium.osm.Location" href="../../reference/Dataclasses/#osmium.osm.Location">osmium.osm.Location</a> or a tuple of lon/lat coordinates</td>
</tr>
<tr>
<td>nodes</td>
<td><em>(way only)</em> <a class="autorefs autorefs-internal" title="            osmium.osm.NodeRefList" href="../../reference/Dataclasses/#osmium.osm.NodeRefList">osmium.osm.NodeRefList</a> or a list consisting of either <a class="autorefs autorefs-internal" title="            osmium.osm.NodeRef" href="../../reference/Dataclasses/#osmium.osm.NodeRef">osmium.osm.NodeRef</a>s or simple node ids</td>
</tr>
<tr>
<td>members</td>
<td><em>(relation only)</em> <a class="autorefs autorefs-internal" title="            osmium.osm.RelationMemberList" href="../../reference/Dataclasses/#osmium.osm.RelationMemberList">osmium.osm.RelationMemberList</a> or a list consisting of either <a class="autorefs autorefs-internal" title="            osmium.osm.RelationMember" href="../../reference/Dataclasses/#osmium.osm.RelationMember">osmium.osm.RelationMember</a>s or tuples of <code>(type, id, role)</code>. The member type must be a single character 'n', 'w' or 'r'.</td>
</tr>
</tbody>
</table>
<p>The <code>osmium.osm.mutable</code> module offers pure Python-object versions of <code>Node</code>,
<code>Way</code> and <code>Relation</code> to make the creation of custom objects easier. Any of
the allowable attributes may be set in the constructor. This makes the
example for writing random points a bit shorter:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">uniform</span>
</span><span id="__span-5-2">
</span><span id="__span-5-3"><span class="k">with</span> <span class="n">osmium</span><span class="o">.</span><span class="n">SimpleWriter</span><span class="p">(</span><span class="s1">&#39;points.opl&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
</span><span id="__span-5-4">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span id="__span-5-5">        <span class="n">writer</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">osmium</span><span class="o">.</span><span class="n">osm</span><span class="o">.</span><span class="n">mutable</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span>
</span><span id="__span-5-6">            <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">)),</span>
</span><span id="__span-5-7">            <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Random </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}))</span>
</span></code></pre></div>
</div>
<h2 id="writer-types">Writer types<a class="headerlink" href="#writer-types" title="Permanent link">ðŸ”—</a></h2>
<p>pyosmium implements three different writer classes: the basic
<a class="autorefs autorefs-internal" title="            osmium.SimpleWriter" href="../../reference/Data-Writers/#osmium.SimpleWriter">SimpleWriter</a> and
the two reference-completing writers
<a class="autorefs autorefs-internal" title="            osmium.ForwardReferenceWriter" href="../../reference/Data-Writers/#osmium.ForwardReferenceWriter">ForwardReferenceWriter</a> and
<a class="autorefs autorefs-internal" title="            osmium.BackReferenceWriter" href="../../reference/Data-Writers/#osmium.BackReferenceWriter">BackReferenceWriter</a>.</p>
<h3 id="writing-specific-objects-only">Writing specific objects only<a class="headerlink" href="#writing-specific-objects-only" title="Permanent link">ðŸ”—</a></h3>
<p>The <a class="autorefs autorefs-internal" title="            osmium.SimpleWriter" href="../../reference/Data-Writers/#osmium.SimpleWriter">SimpleWriter</a> creates an OSM data file by directly
writing out any OSM object that it receives in the chosen format.</p>
<h3 id="writing-reference-complete-files">Writing reference-complete files<a class="headerlink" href="#writing-reference-complete-files" title="Permanent link">ðŸ”—</a></h3>
<p>The <a class="autorefs autorefs-internal" title="            osmium.BackReferenceWriter" href="../../reference/Data-Writers/#osmium.BackReferenceWriter">BackReferenceWriter</a> will make sure that the
file that is written out is reference-complete, meaning all objects that are
directly referenced by the object written are added to the output file as well.
This is needed when you want to make sure that geometries can be recreated
from the object in the file.</p>
<p>Creating a file with backward references is a two-stage process: while the
writer is open, it will write all objects received through one of the <code>add_*()</code>
functions into a temporary file and keeps a record of which objects are needed
to make the file reference-complete. Once the writer is closed, it collects the
missing object from a given reference file, merges them with the data from
the temporary file and writes out the final result.</p>
<h3 id="writing-files-with-forward-references">Writing files with forward references<a class="headerlink" href="#writing-files-with-forward-references" title="Permanent link">ðŸ”—</a></h3>
<p>The <a class="autorefs autorefs-internal" title="            osmium.ForwardReferenceWriter" href="../../reference/Data-Writers/#osmium.ForwardReferenceWriter">ForwardReferenceWriter</a> completes the
written objects with forward references. This is particularly useful when
creating geographic extracts of any kind: one selects the node of interest
in a particular area and then lets the ForwardReferenceWriter complete the
ways and relations referring to the nodes.</p>
<p>Files written by the ForwardReferenceWriter are not necessarily
reference-complete. That is easy to see when considering the example of the
geographic extract: there may be ways in the area that cross the boundary
of the area chosen but only the nodes within the area are written out. This
might be useful in many situations as the way would be simply seem to be cut
on the area of interest. However, it has the disadvantage that some objects
will get invalid geometries, especially when they represent areas.</p>
<p>The other thing to consider during forward completion are indirect references.
When completing relations indirectly referenced through ways or other relations,
then the resulting file can become big very quickly. For example, a seemingly
small extract of the city of Strasbourg can suddenly contain not only the
relations for France and Germany but also electoral boundaries and entire
timezones. For that reason, when forward-completing relations, it is not
recommended to use backward completion.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Sarah Hoffmann
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>