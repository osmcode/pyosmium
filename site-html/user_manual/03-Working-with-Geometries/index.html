
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://osmcode.org/pyosmium/user_manual/03-Working-with-Geometries/">
      
      
        <link rel="prev" href="../02-Extracting-Object-Data/">
      
      
        <link rel="next" href="../04-Working-with-Filters/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>Working with Geometries - Pyosmium 4.0.2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#working-with-geometries" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pyosmium 4.0.2" class="md-header__button md-logo" aria-label="Pyosmium 4.0.2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pyosmium 4.0.2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Working with Geometries
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/osmcode/pyosmium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  User Manual

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cookbooks/" class="md-tabs__link">
          
  
  Cookbooks

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pyosmium 4.0.2" class="md-nav__button md-logo" aria-label="Pyosmium 4.0.2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Pyosmium 4.0.2
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/osmcode/pyosmium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    User Manual
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-First-Steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    First Steps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-Extracting-Object-Data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OSM Objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Working with Geometries
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Working with Geometries
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geometry-types" class="md-nav__link">
    <span class="md-ellipsis">
      Geometry types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Geometry types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#point-geometries" class="md-nav__link">
    <span class="md-ellipsis">
      Point geometries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#line-geometries" class="md-nav__link">
    <span class="md-ellipsis">
      Line geometries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#areas" class="md-nav__link">
    <span class="md-ellipsis">
      Areas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometries-from-other-relation-types" class="md-nav__link">
    <span class="md-ellipsis">
      Geometries from other relation types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geometry-factories" class="md-nav__link">
    <span class="md-ellipsis">
      Geometry Factories
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-geo-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Python Geo Interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#location-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Location Storage
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-Working-with-Filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-Filtering Input Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-Working-with-Handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handler-based Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-Writing-Data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-Input-Formats-And-Other-Sources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input Formats and Other Sources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-Working-With-Change-Files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working With Change Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-Working-With-History-Files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working With History Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-Replication-Tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Replication Tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cookbooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cookbooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Enhance-Tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enhancing Tags in an OSM File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Filtering-Data-By-Tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filtering an OSM File By Tags
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Filter-Data-By-Geometry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filtering by Geometry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Adding-Node-Infos-To-Boundaries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding Place Node Information to Boundary Relations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Adding-Route-Info-To-Ways/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding Relation Information to Member Ways
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/Visualizing-Data-With-Geopandas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualising Data With GeoPandas
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OSM Data Containers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/File-Processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iterative Data Reading
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Handler-Processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handlers and Handler Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Data-Writers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Writers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/IO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IO Classes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Geometry-Functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geometry Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Area/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Area Building
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Indexes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indexes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Replication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Replication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/Exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="working-with-geometries">Working with Geometries<a class="headerlink" href="#working-with-geometries" title="Permanent link">🔗</a></h1>
<p>When working with map data, sooner or later, you will need the geometry
of an object: a point, a line or a polygon. OSM's topologic data model
doesn't make them directly available with each object. In order to build
a geometry for an object, the location information from referenced nodes
need to be collected and then the geometry can be assembled from that.
pyosmium provides a number of data structures and helpers to create
geometries for OSM objects.</p>
<h2 id="geometry-types">Geometry types<a class="headerlink" href="#geometry-types" title="Permanent link">🔗</a></h2>
<h3 id="point-geometries">Point geometries<a class="headerlink" href="#point-geometries" title="Permanent link">🔗</a></h3>
<p>OSM nodes are the only kind of OSM object that produce a point geometry.
The location of the point is directly stored with the OSM nodes. This
makes it straightforward to extract such a geometry:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Code</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;buildings.opl&#39;</span><span class="p">,</span> <span class="n">osmium</span><span class="o">.</span><span class="n">osm</span><span class="o">.</span><span class="n">NODE</span><span class="p">):</span>
</span><span id="__span-0-2">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">: lat = </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">lat</span><span class="si">}</span><span class="s2"> lon = </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">lon</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1">Node 1: lat = 13.0 lon = 45.0
</span><span id="__span-1-2">Node 2: lat = 13.0 lon = 45.0001
</span><span id="__span-1-3">Node 3: lat = 13.0001 lon = 45.0001
</span><span id="__span-1-4">Node 4: lat = 13.0001 lon = 45.0
</span><span id="__span-1-5">Node 11: lat = 13.00001 lon = 45.00001
</span><span id="__span-1-6">Node 12: lat = 13.00001 lon = 45.00005
</span><span id="__span-1-7">Node 13: lat = 13.00005 lon = 45.00005
</span><span id="__span-1-8">Node 14: lat = 13.00005 lon = 45.00001
</span></code></pre></div>
</div>
<h3 id="line-geometries">Line geometries<a class="headerlink" href="#line-geometries" title="Permanent link">🔗</a></h3>
<p>Line geometries are usually created from OSM ways. The OSM way object does
not contain the coordinates of a line geometry directly. It only contains a
list of references to OSM nodes. To create a line geometry from an OSM way,
it is necessary to look up the coordinate of each referenced node.
pyosmium provides an efficient way to do so: the location storage. The storage
automatically records the coordinates of each node that is read from the file
and caches them for future use. When later a way is read from a file, the
list of nodes in the way is augmented with the appropriate coordinates.
Location storage is not enabled by default. To add it to the processing,
use the function <a class="autorefs autorefs-internal" href="../../reference/File-Processing/#osmium.FileProcessor.with_locations"><code>with_locations()</code></a>
of the FileProcessor.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Code</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;../data/buildings.opl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_locations</span><span class="p">():</span>
</span><span id="__span-2-2">    <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">is_way</span><span class="p">():</span>
</span><span id="__span-2-3">        <span class="n">coords</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">lon</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">o</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">valid</span><span class="p">()))</span>
</span><span id="__span-2-4">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Way </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">: LINESTRING(</span><span class="si">{</span><span class="n">coords</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1">Way 1: LINESTRING(45.0 13.0, 45.0001 13.0, 45.0001 13.0001, 45.0 13.0001, 45.0 13.0)
</span><span id="__span-3-2">Way 2: LINESTRING(45.00001 13.00001, 45.00005 13.00001, 45.00005 13.00005, 45.00001 13.00005, 45.00001 13.00001)
</span></code></pre></div>
</div>
<p>Not all OSM files are <em>reference-complete</em>. It can happen that some nodes
which are referenced by a way are missing from a file. Always write your
code so that it can work with incomplete geometries. In particular, you
should be aware that there is no guarantee that an OSM way will translate
into a valid line geometry. An OSM way may consist of only one node.
Or two subsequent coordinates in the line are exactly at the same position.</p>
<p>pyosmium provides different implementations for the location storage. The
default should be suitable for small to medium-sized OSM files. See the
paragraph on <a class="autorefs autorefs-internal" href="#location-storage">Location storage</a> below for more information
on the different types of storages and how to switch them.</p>
<h3 id="areas">Areas<a class="headerlink" href="#areas" title="Permanent link">🔗</a></h3>
<p>OSM has two different ways to model area geometries: they may be derived
from way objects or relation objects.</p>
<p>A way can be interpreted as an area when it is <em>closed</em>. That happens when
the first and the last node are exactly the same. You can use the function
<a class="autorefs autorefs-internal" href="../../reference/Dataclasses/#osmium.osm.Way.is_closed"><code>is_closed()</code></a>.</p>
<p>Not every closed way necessarily represents and area. Think of a little
garden with a fence around it. If the OSM way represents the garden, then it
should be interpreted as an area. If it represents the fence, then it is a
line geometry that just happens to go full circle. You need to look at the
tags of a way in order to decide if it should become an area or a line,
or sometimes even both.</p>
<p>There are two types of relations that also represent areas. If the relation
is tagged with <code>type=multipolygon</code> or <code>type=boundary</code> then it is by
convention an area independently of all the other tags of the relation.</p>
<p>pyosmium implements a special handler for the processing of areas. This
handler creates a new type of object, the <a class="autorefs autorefs-internal" href="../../reference/Dataclasses/#osmium.osm.Area">Area</a> object,
and makes it available like the other OSM types. It can be enabled
with the <a class="autorefs autorefs-internal" href="../../reference/File-Processing/#osmium.FileProcessor.with_areas"><code>with_areas()</code></a> function:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Code</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="n">objects</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="__span-4-2"><span class="n">areas</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="__span-4-3"><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;../data/buildings.opl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_areas</span><span class="p">():</span>
</span><span id="__span-4-4">    <span class="n">objects</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">type_str</span><span class="p">()</span><span class="si">}{</span><span class="n">o</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-4-5">    <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">is_area</span><span class="p">():</span>
</span><span id="__span-4-6">        <span class="n">areas</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">type_str</span><span class="p">()</span><span class="si">}{</span><span class="n">o</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="s1">&#39;w&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">o</span><span class="o">.</span><span class="n">from_way</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="si">}{</span><span class="n">o</span><span class="o">.</span><span class="n">orig_id</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="__span-4-7">
</span><span id="__span-4-8"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OSM objects in this file:&quot;</span><span class="p">,</span> <span class="n">objects</span><span class="p">)</span>
</span><span id="__span-4-9"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Areas in this file:&quot;</span><span class="p">,</span> <span class="n">areas</span><span class="p">)</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1">OSM objects in this file:  n1 n2 n3 n4 n11 n12 n13 n14 w1 w2 r1 a2 a3
</span><span id="__span-5-2">Areas in this file:  a2(w1) a3(r1)
</span></code></pre></div>
</div>
<p>Note how Area objects are added to the iterator <em>in addition</em> to the original
OSM data. During the processing of the loop, there is first OSM way 1 and
then the Area object 2, which corresponds to the same way.</p>
<p>When the area handler is enabled, the FileProcessor scans the file twice:
during the first run information about all relations that might be areas
is collected. This information is then used in the main run of the file
processor, where the areas are assembled as soon as all the necessary
objects that are part of each relation have been collected.</p>
<p>The area handler automatically enables a location storage because it needs
access to the node geometries. It will set up the default implementation.
To use a different implementation, simply use <code>with_locations()</code> with
a custom storage together with <code>with_areas()</code>.</p>
<h4 id="the-pyosmium-area-type">The pyosmium Area type<a class="headerlink" href="#the-pyosmium-area-type" title="Permanent link">🔗</a></h4>
<p>The Area type has the same common attributes as the other OSM types.
However, it produces its own special ID space. This is necessary because
an area might be originally derived from a relation or way. When derived
from a way, the ID is computed as <code>2 * way ID</code>. When it is derived from
a relation, the ID is <code>2 * relation ID + 1</code>. Use the function
<a class="autorefs autorefs-internal" href="../../reference/Dataclasses/#osmium.osm.Area.from_way"><code>from_way()</code></a> to check what type the original OSM
object is and the function <a class="autorefs autorefs-internal" href="../../reference/Dataclasses/#osmium.osm.Area.orig_id"><code>orig_id()</code></a>
to get the ID of the underlying object.</p>
<p>The polygon information is organised in lists of rings. Use
<a class="autorefs autorefs-internal" href="../../reference/Dataclasses/#osmium.osm.Area.outer_rings"><code>outer_rings()</code></a> to iterate over the rings
of the polygon that form outer boundaries of the polygon. The data structures
for these rings are node lists just like the ones used in OSM ways.
They always form a closed line that goes clockwise. Each outer ring can have
one or more holes. These can be iterated through with the
<a class="autorefs autorefs-internal" href="../../reference/Dataclasses/#osmium.osm.Area.inner_rings"><code>inner_rings()</code></a> function. The inner rings
are also a node list but will go anti-clockwise. To illustrate how to process
the functions, here is the simplified code to create the
<a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry">WKT</a>
representation of the polygon:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Code</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;../data/buildings.opl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_areas</span><span class="p">():</span>
</span><span id="__span-6-2">    <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">is_area</span><span class="p">():</span>
</span><span id="__span-6-3">        <span class="n">polygons</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-6-4">        <span class="k">for</span> <span class="n">outer</span> <span class="ow">in</span> <span class="n">o</span><span class="o">.</span><span class="n">outer_rings</span><span class="p">():</span>
</span><span id="__span-6-5">            <span class="n">rings</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">lon</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">outer</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">valid</span><span class="p">()))</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
</span><span id="__span-6-6">            <span class="k">for</span> <span class="n">inner</span> <span class="ow">in</span> <span class="n">o</span><span class="o">.</span><span class="n">inner_rings</span><span class="p">(</span><span class="n">outer</span><span class="p">):</span>
</span><span id="__span-6-7">                <span class="n">rings</span> <span class="o">+=</span> <span class="s2">&quot;, (&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">lon</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">outer</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">valid</span><span class="p">()))</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
</span><span id="__span-6-8">            <span class="n">polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rings</span><span class="p">)</span>
</span><span id="__span-6-9">        <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">is_multipolygon</span><span class="p">():</span>
</span><span id="__span-6-10">            <span class="n">wkt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;MULTIPOLYGON((</span><span class="si">{</span><span class="s1">&#39;), (&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span><span class="si">}</span><span class="s2">))&quot;</span>
</span><span id="__span-6-11">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-12">            <span class="n">wkt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;POLYGON(</span><span class="si">{</span><span class="n">polygons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="__span-6-13">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Area </span><span class="si">{</span><span class="n">o</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">wkt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>        
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1">Area 2: POLYGON((45.0 13.0, 45.0001 13.0, 45.0001 13.0001, 45.0 13.0001, 45.0 13.0))
</span><span id="__span-7-2">Area 3: POLYGON((45.0 13.0, 45.0001 13.0, 45.0001 13.0001, 45.0 13.0001, 45.0 13.0), (45.0 13.0, 45.0001 13.0, 45.0001 13.0001, 45.0 13.0001, 45.0 13.0))
</span></code></pre></div>
</div>
<h3 id="geometries-from-other-relation-types">Geometries from other relation types<a class="headerlink" href="#geometries-from-other-relation-types" title="Permanent link">🔗</a></h3>
<p>OSM has many other relation types apart from the area types. pyosmium has
no special support for other relation types yet. You need to manually
assemble geometries by collecting the geometries of the members.</p>
<h2 id="geometry-factories">Geometry Factories<a class="headerlink" href="#geometry-factories" title="Permanent link">🔗</a></h2>
<p>pyosmium has a number of geometry factories to make it easier to convert
an OSM object to well known geometry formats. To use them, instantiate
the factory once and then hand in the OSM object to one of the create
functions. A code snippet that converts all objects into WKT format looks
approximately like that:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><span class="n">fab</span> <span class="o">=</span> <span class="n">osmium</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">WKTFactory</span><span class="p">()</span>
</span><span id="__span-8-2">
</span><span id="__span-8-3"><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;../data/buildings.opl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_areas</span><span class="p">():</span>
</span><span id="__span-8-4">    <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">is_node</span><span class="p">():</span>
</span><span id="__span-8-5">        <span class="n">wkt</span> <span class="o">=</span> <span class="n">fab</span><span class="o">.</span><span class="n">create_point</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
</span><span id="__span-8-6">    <span class="k">elif</span> <span class="n">o</span><span class="o">.</span><span class="n">is_way</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">o</span><span class="o">.</span><span class="n">is_closed</span><span class="p">():</span>
</span><span id="__span-8-7">        <span class="n">wkt</span> <span class="o">=</span> <span class="n">fab</span><span class="o">.</span><span class="n">create_linestring</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
</span><span id="__span-8-8">    <span class="k">elif</span> <span class="n">o</span><span class="o">.</span><span class="n">is_area</span><span class="p">():</span>
</span><span id="__span-8-9">        <span class="n">wkt</span> <span class="o">=</span> <span class="n">fab</span><span class="o">.</span><span class="n">create_multipolygon</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
</span><span id="__span-8-10">    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-11">        <span class="n">wkt</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># ignore relations</span>
</span></code></pre></div>
</div>
<p>There are factories for GeoJSON (<a class="autorefs autorefs-internal" href="../../reference/Geometry-Functions/#osmium.geom.GeoJSONFactory"><code>osmium.geom.GeoJSONFactory</code></a>),
well-known text (<a class="autorefs autorefs-internal" href="../../reference/Geometry-Functions/#osmium.geom.WKTFactory"><code>osmium.geom.WKTFactory</code></a>)
and well-known binary (<a class="autorefs autorefs-internal" href="../../reference/Geometry-Functions/#osmium.geom.WKBFactory"><code>osmium.geom.WKBFactory</code></a>) formats.</p>
<h2 id="python-geo-interface">Python Geo Interface<a class="headerlink" href="#python-geo-interface" title="Permanent link">🔗</a></h2>
<p>If you want to process the geometries with Python libraries like
<a href="https://shapely.readthedocs.io">shapely</a><sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> or <a href="https://geopandas.org">GeoPandas</a>,
then the standardized <a href="https://gist.github.com/2217756"><strong>geo_interface</strong></a>
format can come in handy.</p>
<p>pyosmium has a special filter <a class="autorefs autorefs-internal" href="../../reference/Filters/#osmium.filter.GeoInterfaceFilter">GeoInterfaceFilter</a>
which enhances pyosmium objects with a <code>geo_interface</code> attribute.
This allows libraries that support this interface to directly consume the
OSM objects. The GeoInterfaceFilter needs location information to create
the geometries. Don't forget to add <code>with_locations()</code> and/or
<code>with_areas()</code> to the FileProcessor.</p>
<p>Here is an example that computes the total length of highways using
the geometry functions of shapely:</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Code</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">shape</span>
</span><span id="__span-9-2">
</span><span id="__span-9-3"><span class="n">total</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-9-4"><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">osmium</span><span class="o">.</span><span class="n">FileProcessor</span><span class="p">(</span><span class="s1">&#39;liechtenstein.osm.pbf&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_locations</span><span class="p">()</span><span class="o">.</span><span class="n">with_filter</span><span class="p">(</span><span class="n">osmium</span><span class="o">.</span><span class="n">GeoHandler</span><span class="p">()):</span>
</span><span id="__span-9-5">    <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">is_way</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;highway&#39;</span> <span class="ow">in</span> <span class="n">o</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
</span><span id="__span-9-6">        <span class="c1"># Shapely has only support for Features starting from version 2.1,</span>
</span><span id="__span-9-7">        <span class="c1"># so lets cheat a bit here.</span>
</span><span id="__span-9-8">        <span class="n">geom</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">])</span>
</span><span id="__span-9-9">        <span class="c1"># Length is computed in WGS84 projection, which is practically meaningless.</span>
</span><span id="__span-9-10">        <span class="c1"># Lets pretend we didn&#39;t notice, it is an example after all.</span>
</span><span id="__span-9-11">        <span class="n">total</span> <span class="o">+=</span> <span class="n">geom</span><span class="o">.</span><span class="n">length</span>
</span><span id="__span-9-12">
</span><span id="__span-9-13"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total length:&quot;</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1">Total length: 14.58228287312081
</span></code></pre></div>
</div>
<p>For an example on how to use the Python Geo Interface together with GeoPandas,
have a look at the <a href="../../cookbooks/Visualizing-Data-With-Geopandas/">Visualisation Recipe</a>.</p>
<h2 id="location-storage">Location Storage<a class="headerlink" href="#location-storage" title="Permanent link">🔗</a></h2>
<p>See the <a href="https://osmcode.org/osmium-concepts/#indexes">Osmium manual</a>
for the different types of location storage.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Shapely only received full support for geo_interface geometries with
  features in version 2.1. For older versions create WKT geometries as
  explained above and create Shapely geometries from that.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Sarah Hoffmann
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "toc.integrate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>